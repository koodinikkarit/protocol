syntax = "proto3";

package SeppoService;

import "ew_song.proto";

message EwDatabase {
	uint32 id = 1;
	string name = 2;
	uint32 songDatabaseId = 3;
	uint64 version = 4;
}

message EwDatabasesConnection {
	repeated EwDatabase ewDatabases = 1;
}

// Queries

message ListenForChangedEwSongRequest {
	uint32 ewDatabaseId = 1;
}

message FetchEwDatabasesRequest {

}

message FetchEwDatabasesResponse {
	repeated EwDatabase ewDatabases = 1;
}

message FetchEwDatabaseByIdRequest {
	repeated uint32 ewDatabaseIds = 1;
}

message FetchEwDatabaseByIdResponse {
	repeated EwDatabase ewDatabases = 1;
}

// Mutations

message CreateEwDatabaseRequest {
	uint32 songDatabaseId = 1;
	string name = 2;
}

message CreateEwDatabaseResponse {
	EwDatabase ewDatabase = 1;
}

message EditEwDatabaseRequest {
	uint32 ewDatabaseId = 1;
	string name = 2;
	uint32 songDatabaseId = 3;
}

message EditEwDatabaseResponse {
	EwDatabase ewDatabase = 1;
}

message RemoveEwDatabaseRequest {
	uint32 ewDatabaseId = 1;
}

message RemoveEwDatabaseResponse {

}

message SyncEwDatabaseRequest {
	uint32 EwDatabaseId = 1;
	repeated EwSong ewSongs = 2;
}

message SyncEwDatabaseResponse {
	repeated EwSong ewSongs = 1;
	repeated uint32 removeEwSongIds = 2;
}

